<div class="commands">
    <div *ngFor="let command of block.commands" class="command">
        <select [(ngModel)]="command.type">
            <option *ngFor="let type of commandTypeNames" [value]="type">{{type}}</option>
        </select>
        
        <ng-container [ngSwitch]="command.type">
            <select *ngSwitchCase="commandTypes.SCALE" [(ngModel)]="command.value">
                <option *ngFor="let name of scaleNames" [value]="name">{{name}}</option>
            </select>
            
            <select *ngSwitchCase="commandTypes.PLAYMODE" [(ngModel)]="command.value">
                <option *ngFor="let name of playModeNames" [value]="name">{{name}}</option>
            </select>
            
            <div *ngSwitchDefault class="value-input">
                <ng-container *ngIf="!command.isVariable">
                    <p-inputNumber [(ngModel)]="command.value" 
                        mode="decimal" [showButtons]="true" 
                        buttonLayout="horizontal" 
                        spinnerMode="horizontal"
                        [size]="1"
                        decrementButtonClass="p-button-secondary" 
                        incrementButtonClass="p-button-secondary"
                        incrementButtonIcon="pi pi-plus" 
                        decrementButtonIcon="pi pi-minus">
                    </p-inputNumber>
                </ng-container>
                <ng-container *ngIf="command.isVariable">
                    <input type="text" [(ngModel)]="command.value" 
                        placeholder="Variable name"
                        (input)="handleValueInput($event, command)">
                </ng-container>
                <button pButton type="button" 
                    [icon]="command.isVariable ? 'pi pi-dollar' : 'pi pi-hashtag'"
                    [class.p-button-secondary]="!command.isVariable"
                    [class.p-button-success]="command.isVariable"
                    (click)="command.isVariable = !command.isVariable">
                </button>
            </div>
        </ng-container>

        <button pButton type="button" icon="pi pi-times" (click)="removeCommand(command)"></button>
    </div>
    <button pButton type="button" icon="pi pi-plus" (click)="addCommand()"></button>
</div>