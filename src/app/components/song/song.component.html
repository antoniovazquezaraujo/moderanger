<!doctype html>
<div class="song-header">
    <!-- Group title and playback controls -->
    <div class="song-title-and-controls">
<div class="song-title">
    <input type="text" [(ngModel)]="song.name" class="song-name-input" placeholder="Enter song name">
        </div>
        <div class="playback-controls">
            <div class="p-d-flex p-ai-center p-flex-nowrap">
                <button pButton type="button" icon="pi pi-plus" (click)="addPart()" class="p-mr-2" pTooltip="Add Part" tooltipPosition="top"></button>
                <span>Repeat:</span>
                <input type="number" id="repetitions" class="number-input" style="width:45px !important; max-width:45px !important;" [(ngModel)]="repetitions" min="1" max="99" step="1">
                <button pButton type="button" icon="pi pi-play" (click)="playSong()" class="p-ml-2"></button>
                <button pButton type="button" icon="pi pi-stop" (click)="stopSong()" class="p-ml-2"></button>
                <app-metronome class="inline-metronome p-ml-2"></app-metronome> 
            </div>
        </div>
    </div>
    <!-- Variables button pushed to the right -->
    <div class="variables-control">
        <p-button (click)="toggleVariablesSidebar()" label="$" styleClass="p-button-text" pTooltip="Show/Hide Variables" tooltipPosition="top"></p-button>
    </div>
</div>

<!-- Restore original app-parts -->
<app-parts 
    [parts] = "getParts() ||[]" 
    (onRemovePart)="removePart($event)">
</app-parts>

<!-- Sidebar moved here -->
<p-sidebar [(visible)]="variablesSidebarVisible" position="right" styleClass="variables-sidebar">
    <h3>Variables</h3>
    <app-variable-declaration></app-variable-declaration>
</p-sidebar>
