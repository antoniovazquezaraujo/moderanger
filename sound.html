<!DOCTYPE html>
<html>

<head>
    <title>Hello MIDI!</title>
    <meta http-equiv="X-UA-Compatible" content="requiresActiveX=true" />
    <script src="JZZ.js"></script>
    <script src="JZZ.synth.Tiny.js"></script>
</head>

<body>
    <h1>Hello MIDI!</h1>
    <script>
        JZZ.synth.Tiny.register('Synth');
        var port = JZZ().openMidiOut().or(function () { alert('Cannot open MIDI port!'); });

        const NOTES = ['D', 'e', 'E', 'F', 'g', 'G', 'a', 'A', 'b', 'B', 'C', 'd'];
        const MIDI_NOTES = ['D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B', 'C', 'Db'];

        function playChords(){
            playChord([ MIDI_NOTES[Math.floor(Math.random()*12)], MIDI_NOTES[Math.floor(Math.random()*12)],MIDI_NOTES[Math.floor(Math.random()*12)]]);
        }
        function playClic(){
            var piano = JZZ.synth.Tiny();
            piano.noteOn(9,80,50)
                .wait(100)
                .noteOff(9,80);
        }
        function playChord(chord){
            var piano = JZZ.synth.Tiny();
            piano.noteOn(9,80)
                .wait(100)
                .noteOff(9,80);
            chord.forEach(note =>{
                piano.noteOn(0,note+'4')
                .wait(1000)
                .noteOff(0,note+'4');
            });

        }

        function playScale(){
            MIDI_NOTES.forEach(note =>{
                JZZ.synth.Tiny()
                .noteOn(0, note+'5', 127)
                .wait(10000)
                .noteOff(0, note+'5');
            });
        }
        function play() {
            JZZ.synth.Tiny()
                .noteOn(0, 'C#5', 127)
                .noteOn(0, 'Eb5', 127)
                .noteOn(0, 'G5', 127)
                .wait(1000)
                .noteOff(0, 'C#5')
                .noteOff(0, 'Eb5')
                .noteOff(0, 'G5');

        }
    </script>

    <button onmousedown='playClic();' onmouseup='stop();'> Press to play... </button>

</body>

</html>